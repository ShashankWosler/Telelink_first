# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time

# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Java CI with Maven

on:

  push:

    branches: [ main ]

  pull_request:

    branches: [ main ]



jobs:

  build:



    runs-on: ubuntu-latest



    steps:

    - uses: actions/checkout@v2

    - name: Set up JDK 11

      uses: actions/setup-java@v2
      with:


        java-version: '17'

        distribution: 'adopt'

        cache: maven

    - name: Build with Maven

      run: mvn -B package --file pom.xml 
      
name: Send Email Notification

on:
  push:
    branches:
      - main  # Replace with your branch name if different

jobs:
  send_email:
    runs-on: ubuntu-latest
    
    steps:
      - name: Send Email Notification
        env:
          SMTP_SERVER: smtp.wosler.ca  # Replace with your SMTP server address
          SMTP_PORT: 587  # Replace with your SMTP port number
          SMTP_USERNAME: ${{ secrets.SMTP_USERNAME }}  # Replace with your SMTP username (stored in GitHub Secrets)
          SMTP_PASSWORD: ${{ secrets.SMTP_PASSWORD }}  # Replace with your SMTP password (stored in GitHub Secrets)
          FROM_EMAIL: shashank.tiwari@wosler.ca  # Replace with your sender email address
          TO_EMAIL: shashank.tiwari@wosler.ca  # Replace with your recipient email address
          SUBJECT: "GitHub Action Notification"
          BODY: |
            Hello,

            This is a notification email sent from GitHub Actions.

            Regards,
            Your Name

        run: |
          echo "Subject: $SUBJECT" > report.html
          echo "$BODY" >> report.html
          echo "" >> report.html
          echo "Sent from GitHub Actions" >> report.html
          
          sendmail -t < report.html
